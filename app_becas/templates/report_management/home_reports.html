{% extends 'layouts/base.html' %}

{% block content %}

<div class="container py-4">
    <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"> 
            <a href="/home/"> Inicio</a> </li>
            <li class="breadcrumb-item active" aria-current="page"> Informes </li>
        </ol>
    </nav>
</div>

    <div class="container p-5 my-3 border shadow">
        <h1 class="text-center">Gesti√≥n de archivos/informes</h1>
        <ul class="nav justify-content-center">
            <li class="nav-item btn-group m-2">
                <button class="btn btn-primary dropdown-toggle"
                        data-bs-toggle="dropdown"
                >Generar informe</button>
                <div class="dropdown-menu">
                    <a class="dropdown-item" href="{% url 'loc' %}">Lista de aspirantes</a>
                </div>
            </li>
            <li class="nav-item">
                <a href="/reports_upload/" class="btn btn-primary m-2">
                    Cargar archivo/informe
                </a>
            </li>
            <li class="nav-item">
                <a href="mailto:" class="btn btn-primary m-2">
                    Enviar archivo/informe
                </a>
            </li>
        </ul>
    </div>

    <div class="container">
        <h2>Archivos/informes cargados</h2>
        {% for file in files %}
            <form action="{% url 'delete_report' file.id %}" method="POST">
                {% csrf_token %}
                <div class="card m-3 shadow">
                    <div class="card-body">
                        <a href="{{ file.my_file.url }}" target="_blank">
                            {{ file.my_file }}
                        </a>
                        <input type="submit"
                               value="delete"
                               class="material-icons btn btn-danger float-end"
                               id="delete-report"
                        >
                    </div>
                </div>
            </form>
        {% endfor %}
    </div>

    <script>
        const btn_del = document.getElementById('delete-report');
        btn_del.addEventListener('click', () => {
            alert('Reporte eliminado.');
        });
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js">
    </script>

{% endblock %}